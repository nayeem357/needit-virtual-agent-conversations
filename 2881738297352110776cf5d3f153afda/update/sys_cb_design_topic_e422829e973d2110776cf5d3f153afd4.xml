<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="sys_cb_design_topic">
    <sys_cb_design_topic action="INSERT_OR_UPDATE">
        <compiled_topic display_value="_PRVW__e022829eee3d2110da42c100ac1284d0">6422829e973d2110776cf5d3f153afd1</compiled_topic>
        <design_definition>{"type":"FlowTopic","triggers":[{"type":"Trigger","name":"e6efae3645a641938501e1f39713e6a8","triggerType":"request","applicability":{"type":"Applicability","mode":"script","value":"true"},"id":"e6efae3645a641938501e1f39713e6a8"}],"goals":[{"name":"primary","trigger_id":"e6efae3645a641938501e1f39713e6a8","nodes":[{"type":"StartGoal","goal_id":"primary","greeting_msg":{"type":"String","mode":"string","value":"gs.getMessageLang(\"I can help you find and update NeedIt records for a type of request.\", vaContext.getRequesterLang())"},"id":"ebf0a7d708314d9f824a3f317b91371f","name":"Start"},{"type":"TerminateGoal","goal_id":"primary","confirmation_msg":{"type":"String","mode":"string","value":"gs.getMessageLang(\"Ask again when you need to update other NeedIt records.\", vaContext.getRequesterLang())"},"id":"36b44005eae143d880101877d97a282c","name":"End"},{"type":"ChoiceInputPrompt","expression_mode":"simple","metadataScript":"","cardName":"","cardFields":[],"id":"dffa19059ec3425884e2196772be907e","name":"NeedIt Type","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"variable_id":"18f4716ffb2544a5ba5c84be3c7c6329","message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"Which type of NeedIt record would you like to view?\", vaContext.getRequesterLang())"},"skippable":{"type":"Applicability","mode":"script","value":"false"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true}},{"type":"OutputPrompt","value":{"type":"String","mode":"script","value":"(function execute() {\n    /* Return a quoted string.  For example:\n\n       if (vaInputs.first_name == 'Bill') {\n           return gs.getMessageLang(\"hi there {0}\", vaContext.getRequesterLang(), [vaInputs.first_name]);\n       } else {\n           return gs.getMessageLang(\"how are you {0}\", vaContext.getRequesterLang(), [vaInputs.last_name]);\n       }\n    */\n    return \"You selected \" + vaInputs.needit_type.getDisplayValue();\n})()\n"},"id":"b426b3eb801b49d6859d12e5dba48af2","name":"Confirm NeedIt Type","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"secure":false},{"type":"ReferenceChoiceInputPrompt","mode":"external","id":"27c2c7ac9d5e4032aef290a8160f4f70","name":"NeedIt List","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"variable_id":"51fb7984bf644c11ba5ad9c5478c911b","message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"Select a NeedIt record to view\", vaContext.getRequesterLang())"},"skippable":{"type":"Applicability","mode":"script","value":"false"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"expression_mode":"script","script":"(function execute(table) {\n  \n      // Initialize an array for the list of NeedIt records to show\n      var options = [];\n  \n      // Query the table selected in the Table field for active records with the \n      // u_request_type selected in the NeedIt Type node where the user is the \n      // u_requested_for. Order the results by the When needed value.\n      var grNI = new GlideRecord(table);\n      grNI.addQuery('u_request_type',vaInputs.needit_type.getValue());\n      grNI.addQuery('active','true');\n      grNI.addQuery('u_requested_for',vaInputs.user);\n      grNI.orderBy('u_when_needed');\n      grNI.query();\n  \n      // Push a value and label pair to the array for each record the query returns.\n      // The value is the unique value. The label is the number, u_when_needed, and         // short_description values for the NeedIt record.\n      while(grNI.next()) {\n          options.push({ 'value': grNI.getUniqueValue(), 'label': grNI.getValue('number') + \" (\" + grNI.getDisplayValue('u_when_needed') + \"): \" + grNI.getValue('short_description') });\n      }\n  \n      // Return the array\n      return options;\n  \n  })(table)","metadataScript":"","cardName":"","cardFields":[],"no_options_found_message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"You have no open NeedIt records\", vaContext.getRequesterLang())"},"condition":{"type":"Condition","mode":"glide_scripted_query","value":"(function execute(table) {\n  \n      // Initialize an array for the list of NeedIt records to show\n      var options = [];\n  \n      // Query the table selected in the Table field for active records with the \n      // u_request_type selected in the NeedIt Type node where the user is the \n      // u_requested_for. Order the results by the When needed value.\n      var grNI = new GlideRecord(table);\n      grNI.addQuery('u_request_type',vaInputs.needit_type.getValue());\n      grNI.addQuery('active','true');\n      grNI.addQuery('u_requested_for',vaInputs.user);\n      grNI.orderBy('u_when_needed');\n      grNI.query();\n  \n      // Push a value and label pair to the array for each record the query returns.\n      // The value is the unique value. The label is the number, u_when_needed, and         // short_description values for the NeedIt record.\n      while(grNI.next()) {\n          options.push({ 'value': grNI.getUniqueValue(), 'label': grNI.getValue('number') + \" (\" + grNI.getDisplayValue('u_when_needed') + \"): \" + grNI.getValue('short_description') });\n      }\n  \n      // Return the array\n      return options;\n  \n  })(table)"}},{"type":"RecordOutputPrompt","mode":"variable","table":"x_58872_needit_needit","variable_id":"51fb7984bf644c11ba5ad9c5478c911b","fields":["priority","short_description","u_when_needed"],"id":"b8201ee6cbc449ff9e2d9eadbc03968b","name":"NeedIt Card","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"condition":{"type":"Condition","mode":"glide_query","value":""}},{"type":"InputPrompt","variable_id":"877ae59c16314b75b49e541c894d1aa0","message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"Would you like to view another NeedIt Record?\", vaContext.getRequesterLang())"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"skippable":{"type":"Applicability","mode":"script","value":"false"},"id":"40f11afa0668432480453d450a49e00d","name":"Search Again","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"Decision","name":"Find more NeedIt Records?","branches":[{"type":"Branch","label":"No","expression":{"type":"Applicability","mode":"query","value":"search_again=false"},"id":"2c32be86effb49b2b3ed0e904fa355b5","name":"No"},{"type":"Branch","label":"Yes","expression":{"type":"Applicability","mode":"query","value":"search_again=true"},"id":"d66ee7cee90f4b0aaeb39ab125d2a3ce","name":"Yes"}],"id":"ace63cba02464934be1811b5eaa865e0","goal_id":"primary"},{"type":"CRUDAction","mode":"update","query":"u_when_needed={{vaInputs.new_when_needed_date}}","variable_id":"51fb7984bf644c11ba5ad9c5478c911b","id":"8af723c6cb5e41bab3a7fd41320b0b8e","name":"Change When Needed Date","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"InputPrompt","variable_id":"af8972876c34451bbfa34f8d2d493e8d","message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"When do you need the NeedIt completed?\", vaContext.getRequesterLang())"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"skippable":{"type":"Applicability","mode":"script","value":"false"},"id":"e5c10fb6d770412f847acb8ceb95a2d6","name":"New When Needed Date","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"RecordOutputPrompt","mode":"variable","table":"x_58872_needit_needit","variable_id":"51fb7984bf644c11ba5ad9c5478c911b","fields":["priority","short_description","u_when_needed"],"id":"a2c2a83427924402b50448632c65f512","name":"Updated NeedIt","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"condition":{"type":"Condition","mode":"glide_query","value":""}},{"type":"ChoiceInputPrompt","expression_mode":"simple","metadataScript":"","cardName":"","cardFields":[],"id":"c3844071ce8a47ebb9278011b2f964a8","name":"Field to update","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"variable_id":"e09ac339e4a44240baffb390d79fa548","message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"What would you like to update?\", vaContext.getRequesterLang())"},"skippable":{"type":"Applicability","mode":"script","value":"false"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true}},{"type":"Decision","name":"Which field to update?","branches":[{"type":"Branch","label":"When Needed","expression":{"type":"Applicability","mode":"query","value":"field_to_update=when_needed"},"id":"d247c13c06f74f61bf98d3a06669fa48","name":"When Needed"},{"type":"Branch","label":"Short Description","expression":{"type":"Applicability","mode":"query","value":"field_to_update=short_description"},"id":"9426a28dfff94fff98b4d34ef762ada0","name":"Short Description"},{"type":"Branch","label":"Nothing","expression":{"type":"Applicability","mode":"query","value":"field_to_update=nothing"},"id":"615de245139e46ab890cc22741e72a24","name":"Nothing"}],"id":"6b2c0fb9f4204bf8bfee8a91bd3bfbda","goal_id":"primary"},{"type":"InputPrompt","variable_id":"88d0587171ed4f899d6a07f22c1f349e","message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"Enter new Short Description for this NeedIt\", vaContext.getRequesterLang())"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"skippable":{"type":"Applicability","mode":"script","value":"false"},"id":"391a5929d99e43b395598ee066ba23fa","name":"New Short Description","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"formatType":"Text","validationScript":""},{"type":"CRUDAction","mode":"update","query":"short_description={{vaInputs.new_short_description}}","variable_id":"51fb7984bf644c11ba5ad9c5478c911b","id":"24ce5484a66342a28e6c49083aff62fc","name":"Change Short Description","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"ScriptedAction","script":"(function execute() {\n    /* Code your scripted action here. For example, you might update a\n       record based on conditional logic:\n\n        if (vaVars.my_flag == 'say hello') {\n            gs.info('hi there');\n        } else {\n            gs.info('bye now');\n        }\n    */\n    vaVars.search_count = vaVars.search_count + 1;\n})()\n","id":"26bb8760e58946b29e46c73cf1e37eea","name":"Update search_count","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"Decision","name":"Search Count Reaches 3","branches":[{"type":"Branch","label":"Less than 3","expression":{"type":"Applicability","mode":"script","value":"(function execute() {\n    /* Return true or false to indicate the branch condition's applicability.\n       For example:\n\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\n       return applies;\n    */\n    if(vaVars.search_count &lt; 3)\n      return true;\n    else\n      return false;\n})()\n"},"id":"49eb0d9505a048fb86f9ee2b5d3b5c70","name":"Less than 3"},{"type":"Branch","label":"3 or More","expression":{"type":"Applicability","mode":"script","value":"(function execute() {\n    /* Return true or false to indicate the branch condition's applicability.\n       For example:\n\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\n       return applies;\n    */\n    if(vaVars.search_count == 3)\n    return true;\n    else\n    return false;\n})()\n"},"id":"9d88f9765eed4f5686fd07622ea35b2a","name":"3 or More"}],"id":"c67ac7eb4e444eb69fa0875ca19ed689","goal_id":"primary"}],"edges":[{"type":"Edge","source_node_id":"ebf0a7d708314d9f824a3f317b91371f","target_node_id":"dffa19059ec3425884e2196772be907e","id":"7d7fd8c4ed7c46d690276ded98eaf6a7"},{"type":"Edge","source_node_id":"dffa19059ec3425884e2196772be907e","target_node_id":"b426b3eb801b49d6859d12e5dba48af2","id":"6231f32d44724444a729251f0589e4e7"},{"type":"Edge","source_node_id":"b426b3eb801b49d6859d12e5dba48af2","target_node_id":"27c2c7ac9d5e4032aef290a8160f4f70","id":"afcf40616fb540eb90006c78727798c3"},{"type":"Edge","source_node_id":"27c2c7ac9d5e4032aef290a8160f4f70","target_node_id":"b8201ee6cbc449ff9e2d9eadbc03968b","id":"b9948097f69b4d81ab63f7968b31262c"},{"type":"Edge","source_node_id":"40f11afa0668432480453d450a49e00d","target_node_id":"ace63cba02464934be1811b5eaa865e0","id":"cb93381db1ca4602a6a1712d89ebbd6e"},{"type":"Edge","source_node_id":"ace63cba02464934be1811b5eaa865e0","target_node_id":"36b44005eae143d880101877d97a282c","branch_id":"2c32be86effb49b2b3ed0e904fa355b5","id":"c962c4cf191346aca7900670ebb0652d","name":"2c32be86effb49b2b3ed0e904fa355b5"},{"type":"Edge","source_node_id":"e5c10fb6d770412f847acb8ceb95a2d6","target_node_id":"8af723c6cb5e41bab3a7fd41320b0b8e","id":"09d61ca15bb0421280a5380aa0949bd0"},{"type":"Edge","source_node_id":"8af723c6cb5e41bab3a7fd41320b0b8e","target_node_id":"a2c2a83427924402b50448632c65f512","id":"47ec8e159c6942bd996300361f952518"},{"type":"Edge","source_node_id":"a2c2a83427924402b50448632c65f512","target_node_id":"40f11afa0668432480453d450a49e00d","id":"0bdfb56b64fd47e29f674c36373ff0ef"},{"type":"Edge","source_node_id":"b8201ee6cbc449ff9e2d9eadbc03968b","target_node_id":"c3844071ce8a47ebb9278011b2f964a8","id":"671eeff90b0a461caa8f3d60c38e12e2"},{"type":"Edge","source_node_id":"c3844071ce8a47ebb9278011b2f964a8","target_node_id":"6b2c0fb9f4204bf8bfee8a91bd3bfbda","id":"44d917ac6a7b4e4da74d699d92883e19"},{"type":"Edge","source_node_id":"6b2c0fb9f4204bf8bfee8a91bd3bfbda","target_node_id":"e5c10fb6d770412f847acb8ceb95a2d6","branch_id":"d247c13c06f74f61bf98d3a06669fa48","id":"4bfd3b28697d47b5a578efdfdeb683ca","name":"d247c13c06f74f61bf98d3a06669fa48"},{"type":"Edge","source_node_id":"6b2c0fb9f4204bf8bfee8a91bd3bfbda","target_node_id":"391a5929d99e43b395598ee066ba23fa","branch_id":"9426a28dfff94fff98b4d34ef762ada0","id":"d392fbee02b544cab02275f3b9fca735","name":"9426a28dfff94fff98b4d34ef762ada0"},{"type":"Edge","source_node_id":"391a5929d99e43b395598ee066ba23fa","target_node_id":"24ce5484a66342a28e6c49083aff62fc","id":"855c79007fd749fc96f3bc02db739a54"},{"type":"Edge","source_node_id":"24ce5484a66342a28e6c49083aff62fc","target_node_id":"a2c2a83427924402b50448632c65f512","id":"1325de77dca2410da7d62d03aff0de18"},{"type":"Edge","source_node_id":"6b2c0fb9f4204bf8bfee8a91bd3bfbda","target_node_id":"40f11afa0668432480453d450a49e00d","branch_id":"615de245139e46ab890cc22741e72a24","id":"f0131e92d6684a62bdb15824caa7d43d","name":"615de245139e46ab890cc22741e72a24"},{"type":"Edge","source_node_id":"ace63cba02464934be1811b5eaa865e0","target_node_id":"26bb8760e58946b29e46c73cf1e37eea","branch_id":"d66ee7cee90f4b0aaeb39ab125d2a3ce","id":"9d4ebb8c54e04169b4a9168024c395ab","name":"d66ee7cee90f4b0aaeb39ab125d2a3ce"},{"type":"Edge","source_node_id":"26bb8760e58946b29e46c73cf1e37eea","target_node_id":"c67ac7eb4e444eb69fa0875ca19ed689","id":"9f8802bf9f374d52990b8da7d6321574"},{"type":"Edge","source_node_id":"c67ac7eb4e444eb69fa0875ca19ed689","target_node_id":"dffa19059ec3425884e2196772be907e","branch_id":"49eb0d9505a048fb86f9ee2b5d3b5c70","id":"2f90e1648a064a90a4e008b539df606e","name":"49eb0d9505a048fb86f9ee2b5d3b5c70"},{"type":"Edge","source_node_id":"c67ac7eb4e444eb69fa0875ca19ed689","target_node_id":"36b44005eae143d880101877d97a282c","branch_id":"9d88f9765eed4f5686fd07622ea35b2a","id":"28745d302fa94b66a971a074570faea7","name":"9d88f9765eed4f5686fd07622ea35b2a"}],"id":"primary"}],"script_variables":[{"type":"String","name":"LiveAgent_application","value":{"type":"String","mode":"string"},"list":false,"id":"e060b2e994ce43b2a0768d0153535afb","formatType":"text","secure":false,"sensitive":false},{"type":"String","name":"search_count","value":{"type":"String","mode":"string","value":"0"},"list":false,"id":"59a0b17ac1d94ce592e635ed7c60d4ba","formatType":"text","secure":false,"sensitive":false}],"glide_variables":[{"type":"Reference","table":"sys_user","id":"current-user","name":"user","formatType":"text","secure":false,"sensitive":false,"list":false},{"type":"Choice","choices":[{"name":"Legal","element":"legal"},{"name":"Facilities","element":"facilities"},{"name":"Human Resources","element":"hr"}],"id":"18f4716ffb2544a5ba5c84be3c7c6329","name":"needit_type","formatType":"text","secure":false,"sensitive":false,"list":false},{"type":"Reference","table":"x_58872_needit_needit","id":"51fb7984bf644c11ba5ad9c5478c911b","name":"needit_list","formatType":"text","secure":false,"sensitive":false,"list":false},{"type":"True/False","id":"877ae59c16314b75b49e541c894d1aa0","name":"search_again","formatType":"text","secure":false,"sensitive":false,"list":false},{"type":"Reference","table":"x_58872_needit_needit","id":"5079859f98944362807c12d66d4a8ba3","name":"change_when_needed_date","formatType":"text","secure":false,"sensitive":false,"list":false},{"type":"Date/Time","mode":"date_time","id":"af8972876c34451bbfa34f8d2d493e8d","name":"new_when_needed_date","formatType":"text","secure":false,"sensitive":false,"list":false},{"type":"Choice","choices":[{"name":"Short Description","element":"short_description"},{"name":"When Needed","element":"when_needed"},{"name":"Nothing","element":"nothing"}],"id":"e09ac339e4a44240baffb390d79fa548","name":"field_to_update","formatType":"text","secure":false,"sensitive":false,"list":false},{"type":"String","name":"new_short_description","list":false,"id":"88d0587171ed4f899d6a07f22c1f349e","formatType":"Text","validationScript":"","secure":false,"sensitive":false},{"type":"Reference","table":"","id":"8c55b6d29944492a945a1fe1a10dc9a3","name":"change_short_description","formatType":"text","secure":false,"sensitive":false,"list":false}],"applicability":{"type":"Applicability","mode":"script","value":"true"},"roles":[],"scope":"2881738297352110776cf5d3f153afda","domain":"global","topic_type":"STANDARD","channels":[],"id":"eb43011697792110776cf5d3f153af84","name":"_PRVW__e022829eee3d2110da42c100ac1284d0","key_phrases":["Update NeedIt Records","NeedIt Request"],"nlu_provider":"","nlu_model":"","nlu_model_label":"","nlu_intent":"","nlu_intent_label":"","flexible_conversation_switching":false,"autopilot_topic":false,"design_categories":[{"name":null,"visible":false,"sysId":"20e1f74a97352110776cf5d3f153af32"}],"triggerable_by_notification":false,"library":false,"readOnly":false,"nluMapping":"[]"}</design_definition>
        <design_topic_id>eb43011697792110776cf5d3f153af84</design_topic_id>
        <name>_PRVW__e022829eee3d2110da42c100ac1284d0</name>
        <sys_class_name>sys_cb_design_topic</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2023-03-27 21:10:09</sys_created_on>
        <sys_domain>global</sys_domain>
        <sys_id>e422829e973d2110776cf5d3f153afd4</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>FlowTopic</sys_name>
        <sys_package display_value="NeedIt Virtual Agent Conversations" source="x_832577_needit_vi">2881738297352110776cf5d3f153afda</sys_package>
        <sys_policy/>
        <sys_scope display_value="NeedIt Virtual Agent Conversations">2881738297352110776cf5d3f153afda</sys_scope>
        <sys_update_name>sys_cb_design_topic_e422829e973d2110776cf5d3f153afd4</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2023-03-27 21:10:09</sys_updated_on>
        <type>FlowTopic</type>
    </sys_cb_design_topic>
</record_update>
